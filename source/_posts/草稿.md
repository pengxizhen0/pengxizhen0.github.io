---
title: 草稿
categories:
  - 草稿
date: 2020-01-01 21:52:04
---

理论上，TCP滑动窗口大小设置为`带宽*单向时延*2`，乘以2的原因是可以充分利用信道。

<!-- more -->

进程间通信：

- 共享内存
- 消息队列
- 信号量
- Socket



堆排序：第一步：自上而下建堆O(n)；第二步：输出元素并保持有序O(logn)，需要自上而下保持有序





堆插入：自下而上





final作用

哪些是final的

final对象的成员变量

String为什么是final

volatile保证单例？

错误重写hash函数，equals没有错。对于HashSet和HashMap，会出现什么情况。







逃逸分析：JVM对程序的优化，可从以下三个方面进行优化：

1. 栈上分配。不会逃逸的局部变量会被分配在栈上，减少GC。
2. 同步消除。不会线程逃逸的变量，会优化掉与之相关的锁。
3. 标量替换。





RPC VS MQ

1. RPC耦合，MQ解耦；
2. MQ可削峰填谷；
3. MQ可广播。



测试IO/CPU耗时比例：apm工具





```java
//LockSupport.java
public static void unpark(Thread thread) {
        if (thread != null)
            UNSAFE.unpark(thread);
    }
```



- 重复请求：幂等
- 并发请求：串行、锁
- 超量请求：扩容、限流、拒绝
- 消息乱序：锁+版本号+幂等
- 非法调用：鉴权
- 依赖不稳定：超时控制、降级、熔断



阻塞队列可以用来实现池化技术





编译时环境：*.java -> *.class（机器码）

运行时环境：*.class -> 加载进JVM







对于C/C++，在编译时选择平台

对于Java，在运行时选择平台



JDK内置工具使用jps、jstack、jmap、jstat

Java visualVM